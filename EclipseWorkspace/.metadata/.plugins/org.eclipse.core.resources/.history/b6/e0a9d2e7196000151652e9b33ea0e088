package artGame.ui.renderer;

import java.nio.FloatBuffer;

import org.lwjgl.BufferUtils;

import artGame.ui.renderer.math.Matrix4f;
import static org.lwjgl.opengl.GL15.GL_ARRAY_BUFFER;
import static org.lwjgl.opengl.GL15.GL_STATIC_DRAW;
import static org.lwjgl.opengl.GL11.glDrawArrays;
import static org.lwjgl.opengl.GL11.GL_TRIANGLES;

public class Model implements Asset {
	private FloatBuffer vertices;
	private VertexArrayObject vao;
	private VertexBufferObject vbo;
	
	private Matrix4f model;
	
	private Material material;

	public Model() {
		vao = new VertexArrayObject();
		vao.bind();

		vertices = BufferUtils.createFloatBuffer(3 * 6);
		vertices.put(-0.6f).put(-0.4f).put(0f).put(1f).put(0f).put(0f);
		vertices.put(0.6f).put(-0.4f).put(0f).put(0f).put(1f).put(0f);
		vertices.put(0f).put(0.6f).put(0f).put(0f).put(0f).put(1f);
		vertices.flip();
		
		vbo = new VertexBufferObject();
        vbo.bind(GL_ARRAY_BUFFER);
        vbo.uploadBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW);
		
		material = new Material();
	}

	@Override
	public void draw(Matrix4f view) {
		material.updateUniforms(model, view);
		glDrawArrays(GL_TRIANGLES, 0, 3);
	}
	
	@Override
	public void delete() {
		vao.delete();
		vbo.delete();
	}
}
